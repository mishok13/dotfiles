services:

  pihole:
    restart: always
    image: pihole/pihole:2026.02.0@sha256:ee348529cea9601df86ad94d62a39cad26117e1eac9e82d8876aa0ec7fe1ba27
    container_name: pihole
    ports:
      - "53:53/tcp"
      - "53:53/udp"
      - "127.0.0.1:31480:80/tcp"
    environment:
      TZ: 'Europe/Amsterdam'
      WEBPASSWORD_FILE: /run/secrets/pihole_password
      VIRTUAL_HOST: "pihole.mishok13.me"
    secrets:
      - pihole_password
    volumes:
      - "~/.local/share/pihole/:/etc/pihole"
      - "~/.local/share/dnsmasq:/etc/dnsmasq.d"
    cap_add:
      - NET_ADMIN
      - SYS_NICE

secrets:
  pihole_password:
    file: /etc/secrets/pihole-password
